<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
		<link rel="icon" type="image/x-icon" href="./assets/img/JavaScript-logo.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JavaScript Training</title>
		
		<!-- styles -->
		<link rel="stylesheet" href="./assets/css/reset.css">
		<link rel="stylesheet" href="./assets/css/reveal.css">
		<link rel="stylesheet" href="./assets/css/theme/black.css">
		<link rel="stylesheet" href="./assets/plugin/highlight/monokai.css">
		<link rel="stylesheet" href="./assets/css/internation.css">
		<link rel="stylesheet" href="./assets/css/global.css">
  </head>
  <body>
		<div class="reveal">
			<div class="menubar" id="menubar">
				<div class="dropdown">
					<input id="checkbox_toggle" type="checkbox">
					<label for="checkbox_toggle" data-i18n="chooselanguage">Choose language</label>
					<div class="langchooser">
						<label>
								<input type="radio" name="menulangradios" value="en" checked><span>English</span>
						</label>
						<label>
								<input type="radio" name="menulangradios" value="fr"><span>Français</span>
						</label>
					</div>
				</div>
			</div>
			<div class="slides">
				<section id="intro">
					<a href="./"><img src="./assets/img/JavaScript-logo.png" alt="logo" class="logo"></a>
					<h3 data-i18n="title">JavaScript Training</h3>
					<p>
						<a href="https://github.com/worldline/JS-Training" target="_blank">
							https://github.com/worldline/JS-Training
						</a>
					</p>
					<div class="langchooser flags">
						<label>
							<input type="radio" name="langradios" value="en" checked><img src="./assets/img/en.png">
						</label>
						<label>
							<input type="radio" name="langradios" value="fr"><img src="./assets/img/fr.png">
						</label>
					</div>
        </section>
				<section class="small-list">
					<ul>
						<li>
							This course is for developers who already have a beginner to an intermediate level in JavaScript and who 
							wish to deepen their knowledge of this language to better understand more ambitious JavaScript projects.
						</li>
						<li>
							It is classified as advanced, which means that we will focus more on the technical points of the language 
							and on the study of some advanced programming patterns.
						</li>
						<li>
							The training focuses on the language and is agnostic of any framework or environment, meaning that you 
							will be able to apply these lessons to both front-end (Angular, Vue.js, Ember...) and back-end (Node.js).
						</li>
						<li>
							It is the ideal opportunity to review and consolidate the basics for all those who have learned 
							JavaScript "on the job", or to prepare or complement a training on a modern web framework.
						</li>
					</ul>
				</section>
				<section class="agenda">
					<h1>Agenda</h1>
					<div class="flex-slide">
						<div style="flex-basis: 100%;">
							<h4 class="blue">Introduction</h4>
							<ul>
								<li>ECMAScript, TC39 and versions of JavaScript</li>
							</ul>
	
							<h4 class="blue">A reintroduction to JavaScript</h4>
							<ul>
								<li>Primitives and Objects</li>
								<li>Property descriptors</li>
								<li>Scopes and Closures</li>
								<li>Functions and contexts</li>
								<li>Implicit casts</li>
							</ul>
						</div>

						<div style="flex-basis: 100%;">
							<h4 class="blue">ES2015 Upgrade</h4>
							<ul>
								<li>Arrow functions</li>
								<li>Default parameters</li>
								<li>Spread / Rest</li>
								<li>Destructuring</li>
								<li>Template literals</li>
								<li>Map and Sets</li>
								<li>Modules</li>
							</ul>
	
							<h4 class="blue">Managing asynchrony</h4>
							<ul>
								<li>Asynchronous, what is it?</li>
								<li>Callbacks and Publisher/Subscriber model</li>
								<li>Promises</li>
								<li>async / await</li>
								<li>Observables</li>
							</ul>
						</div>

						<div style="flex-basis: 100%;">
							<h4 class="blue">Object oriented</h4>
							<ul>
								<li>Prototypes and delegation</li>
								<li>class / super / extends</li>
								<li>Composition of objects</li>
								<li>Symbols, iterables and generators</li>
								<li>Proxies</li>
							</ul>
	
							<h4 class="blue">Functionally oriented</h4>
							<ul>
								<li>Recursivity</li>
								<li>Chainable APIs</li>
								<li>Composition of functions</li>
								<li>Curryfication</li>
							</ul>

							<h4 class="blue">Transpilers</h4>
							<ul>
								<li>Babel</li>
								<li>TypeScript</li>
								<li>JSX</li>
							</ul>
						</div>
					</div>
				</section>
				<section>
					<section>
						<h2>Cheat Sheets</h2>
						<p>It can be useful</p>
					</section>
					<section>
						<h2>String Methods</h2>
						<pre style="font-size: .5em"><code class="javascript hljs" data-trim data-line-numbers>
							"str".charAt(1) === "str"[1] === "t"
							"a".concat("b") === "a" + "b" === "ab"
							"str".startsWith("s") === true
							"str".endsWith("r") === true
							"str".includes("st") === true
							"toto".indexOf("t") === 0
							"toto".lastIndexOf("t") === 2
							"str".search(/t/) === 1
							"str1".match(/r(\d)/) => ["r1", "1"]
							"Hi Bob".replace(/Hi (\w+)/, "Hello $1") => "Hello Bob"
							"string".slice(0,3) === "str"
							"1,2,3".split(",") => ["1","2","3"]
							"STR".toLowerCase() === "str"
							"str".toUpperCase() === "STR"
							"  str  ".trim() == "str"
						</code></pre>
					</section>
					<section>
						<h2>Array Methods</h2>
						<pre style="font-size: .3em"><code class="javascript hljs" data-trim data-line-numbers>
							[1,2].concat([3,4], 5, 6) // [1,2,3,4,5,6]
							[1,2,3].fill(4) // [4,4,4]
							[1,2,3].includes(2) // true
							[1,2,3].indexOf(2) // 1
							[1,2,3].join("-") // "1-2-3"
							[1,2,3,4].slice(1,3) // [2,3]
							
							[1,2,3,4].every((value, index, arr) => n > 2) // false
							[1,2,3,4].some((value, index, arr) => n > 2) // true
							[1,2,3,4].find((value, index, arr) => n > 2) // 3
							[1,2,3,4].findIndex((value, index, arr) => n > 2) // 2
							[1,2,3,4].filter((value, index, arr) => n > 2) // [3,4]
							[1,2,3,4].forEach((value, index, arr) => { ... })
							[1,2,3,4].map((val, index, arr) => val * 2) // [2,4,6,8]
							[1,2,3,4].reduce((accu, n) => accu + n, "test") // "test1234"
							[1,2,3,4].reduceRight((accu, n) => accu + n, "test") // "test4321"
							
							// /!\ Mutative methods, original array is modified!
							let arr = [3,2,1]
							arr.push(4,5) // returns new array.length (5), a = [3,2,1,4,5]
							arr.pop() // returns last item (5), a = [3,2,1,4]
							arr.unshift(6,5) // returns new array.length (6) ; a = [6,5,3,1,2,4]
							arr.shift() // returns first item (6) ; a = [5,3,1,2,4]
							arr.splice(1,2,7,8) // at index 1, remove 2 items, insert (7,8) ; [5,7,8,2,4]
							arr.sort((a,b) => a-b) // [2,4,5,7,8]
							arr.reverse() // [8,7,5,4,2]
						</code></pre>
					</section>
					<section>
						<h2>Map</h2>
						<pre style="font-size: .5em"><code class="javascript hljs" data-trim data-line-numbers>
							let map = new Map([ ['key1', 'val1'], ['key2', 'val2'] ])
							let key = {}, value = {} // any type
							
							map.set(key, value)
							map.get(key) === value
							map.has(key) === true
							map.delete(key);
							map.size === 2
							
							let keys = [...map.keys()]
							let values = [...map.values()]
							let fusionMap = new Map([...map1, ...map2])
							
							for(let [key, val] of map){ }
							map.forEach((val, key, map) => {})
						</code></pre>
					</section>
					<section>
						<h2>Set</h2>
						<pre style="font-size: .5em"><code class="javascript hljs" data-trim data-line-numbers>
							let mySet = new Set([ 1,2,3,4 ])
								▸ Set(4) {1, 2, 3, 4}

							mySet.add("any type")
							map.has(3) === true
							map.delete(3);
							map.size === 4;
							map.clear(); // remove all
							 
							for(let item of mySet){}
							mySet.forEach(item => {})
							let items = [...mySet];
						</code></pre>
					</section>
				</section>
				<section>
					<section>
						<h2>Introduction</h2>
						<p>
							Who manages JavaScript? How is the language evolving? <br />
							ECMAScript, TC39 and JavaScript versions
						</p>
					</section>
					<section>
						<h2 class="flex-center blue">ECMAScript <img height="50px" src="assets/img/ecma.jpg"></h2>
						<ul>
							<li>
								<b>ECMA International</b> is an organisation that creates standards for technologies
							</li>
							<li>
								<b>ECMAScript</b> is the name of the specification referenced ECMA-262 and describing a general purpose scripting language
							</li>
							<li>
								<b>TC39</b> is the name of the technical committee that decides on developments in the ECMAScript specification. 
								It is composed of delegates from <b>major companies</b> (including all browser providers) and <b>invited experts.</b>
							</li>
							<li>
								<b>JavaScript</b> is a versatile scripting language and the most popular implementation of ECMAScript<br>
								<em>(another popular implementation: ActionScript)</em>
							</li>
						</ul>
					</section>
					<section style="text-align: left;">
						<h2>JavaScript Evolutions</h2>
						<p>
							TC39 is considering proposals for ECMAScript developments. Each proposal goes through 5 stages:
						</p>
						<ul>
							<li>0:
								<b>Strawman -</b> suggestion of a need, call for ideas
							</li>
							<li>1:
								<b>Proposal -</b> draft solution, first polyfills/demos
							</li>
							<li>2:
								<b>Draft -</b> precisely describes the syntax/API
							</li>
							<li>3:
								<b>Candidate -</b> signed by the whole committee, call for implementations
							</li>
							<li>4:
								<b>Finished -</b> ready to be included in the next version of ES
							</li>
						</ul>
						<div style="text-align: center;">
							<p>TC39 proposals and meetings are public: <a href="https://github.com/tc39">github.com/tc39</a></p>
							<fieldset>
								Any proposal before stage 4 can be dropped completely. <br />
								However, from stage 3 onwards, the level of confidence is quite high.	
							</fieldset>
						</div>
					</section>
					<section>
						<h2>Versions of ECMAScript</h2>
						<img src="./assets/img/ecmascript-versions.png" height="150px">
						<p>
							A long delay between initial draft and release implies many browser-specific implementations.
						</p>
						<p>
							TC39 has decided to move to an annual release schedule from ES6, renamed <b>ES2015</b>
						</p>
						<p>
							Since 2015, a new version of the ECMAScript specification is released every year: ES2016, ES2017...
						</p>
					</section>
					<section>
						<h2>ECMAScript browser implementation</h2>
						<p>
							As a result of the new annual rhythm:<br />
							<small>an excellent, comprehensive and consistent support across all modern browsers</small>
						</p>
						<div class="flex-center">
							<p style="font-size: .8em;">So-called "<span class="green">evergreen</span>" browsers</p>
							<img height="450px" src="./assets/img/evergreen.png">
						</div>
					</section>
				</section>
				<section>
					<section>
						<h2>A reintroduction to JS</h2>
						<p>Exercices 1 to 6</p>
					</section>
					<section style="text-align: left;">
						<h2>Exercices</h2>
						<p>
							Slides and exercises available on Github:
							<a href="https://github.com/worldline/JS-Training">https://github.com/worldline/JS-Training</a>
						</p>
						<p>
							Do the exercises from your browser at this address:
							<a href="https://codesandbox.io/s/github/SDCOAdvocates/JS-Training">https://codesandbox.io/s/github/SDCOAdvocates/JS-Training</a>
						</p>
						<img src="./assets/img/Image1.png">
						<p>
							Fork to create your personal version of the working repo. 
							You can publish it on your personal Github account if you have one.
						</p>
						<div class="flex-center">
							<img height="142px" src="./assets/img/Image2.png">
							<img height="142px" src="./assets/img/Image3.png">
							<img height="142px" src="./assets/img/Image4.png">
						</div>
						<p>For each exercise, correct the source to validate the associated test</p>
					</section>
					<section>
						<h2 class="flex-center blue">
							Types and Primitives 
							<span class="title-exo">Exo 1</span>
						</h2>
						<p>JavaScript defines 7 data types:</p>
						<img height="250px" src="./assets/img/Image5.png">
						<p>The <b class="monospace">typeof</b> operator returns the type of an object, but be careful:</p>
						<pre><code class="javascript hljs" data-trim>
							typeof null === "object" // bug of the 1st version of ES
							typeof function(){} === "function"
						</code></pre>
					</section>
					<section>
						<h2>null or undefined</h2>
						<ul>
							<li><b class="monospace">undefined</b> : the variable is declared but not assigned</li>
							<li><b class="monospace">null</b> : the variable has been assigned to the null reference</li>
						</ul>
						<p>
							<b class="monospace">null</b> represents the intentional absence of value and often comes from an assignment by the developer
						</p>
						<fieldset>
							Don't assign variables to undefined. Use the delete operator instead:<br>
							<img height="70px" src="./assets/img/Image6.png">
						</fieldset>
					</section>
					<section style="text-align: left;">
						<h2>Objects</h2>
						<p>Functions, <b class="monospace">arrays</b> and derivatives are all of type <b class="monospace">object</b>. Unlike primitives, objects:</p>
						<ul>
							<li>are compared by reference</li>
						</ul>
						<pre><code class="javascript hljs" data-trim>
							"test" === "test"
							true
								
							{ item: "test" } === { item: "test" }
							true
						</code></pre>
						<ul>
							<li>have a list of properties that are key-value pairs: key (String, Symbol) ⇔ value (any)</li>
						</ul>
						<pre><code class="javascript hljs" data-trim>
							"item" in { item: "test" } === true								
							Symbol.iterator in [1,2,3] === true
						</code></pre>
					</section>
					<section>
						<h2 class="flex-center blue">
							Objects: property browsing
							<span class="title-exo">Exo 2</span>
						</h2>
						<pre style="font-size: 17px"><code class="javascript hljs" data-trim>
							let obj = { a: 1, b: 2 }

							"a" in obj
							true

							for(let key in obj) console.log(key, obj[key])
							a 1
							b 2

							Object.keys(obj)
								▸ (2) ["a", "b"]
							Object.values(obj)
								▸ (2) [1, 2]
							Object.entries(obj)
								▾ (2) [Array(2), Array(2)]
									▸ (2) ["a", 1]
									▸ (2) ["b", 2]
										length: 2
									▸ __proto__: Array(0)
						</code></pre>
					</section>
					<section>
						<h2 class="flex-center blue">
							Objects: property assignment
							<span class="title-exo">Exo 3</span>
						</h2>
						<pre><code class="javascript hljs" data-trim>
							let obj = { key: "value" }
							obj.a = 1;
							obj["b"] = 2;
							Object.assign(obj, { c: 3, d: 4}, {d: 5});
								▸ {key: "value", a: 1, b: 2, c: 3, d: 5}

							Object.fromEntries([ ['a', 1], ['b', 1]]);
								▸ {a: 1, b: 2}
						</code></pre>
						<fieldset>
							<b class="monospace">Object.assign</b> is very useful for assigning default values 
							or assigning a set of properties in a single statement
						</fieldset>
					</section>
					<section style="text-align: left;">
						<h2>Property descriptors</h2>
						<p>Each property contains in addition to its value, a list of intrinsic parameters called <b>descriptors</b>:</p>
						<ul>
							<li><b class="monospace">value:</b> <em>the value of the property</em></li>
							<li><b class="monospace">enumerable: true</b> <em>if the property is returned by Object.keys or for..in</em></li>
							<li><b class="monospace">writable: true</b> <em>if the value of the property can be modified</em></li>
							<li><b class="monospace">configurable: true</b>: <em>if the descriptor can be modified</em></li>
							<li><b class="monospace">get</b>: <em>optional function to use as getter</em></li>
							<li><b class="monospace">set</b>: <em>optional function to use as mutator (setter)</em></li>
						</ul>
						<p>A default assignment is enumerable, modifiable and configurable, without specific accessors or mutators</p>
					</section>
					<section>
						<h2 class="flex-center blue">
							Define the descriptors
							<span class="title-exo">Exo 4</span>
						</h2>
						<p>The method <b class="monospace">Object.defineProperty()</b> allows you to assign a property by specifying its descriptors</p>
						<div class="flex-center">
							<pre><code class="javascript hljs" data-trim>
								const obj = {}

								Object.defineProperty(obj, 'a', {
									value: 1,
									enumerable: true,
									writable: false
								});

								Object.defineProperty(obj, {
									b: { enumerable: true, value: 2 },
									c: { get: function(){ return 3 } },
								});
									
								▸ {a: 1, b: 2}			
							</code></pre>
							<img height="325px" src="./assets/img/Image7.png">
						</div>
					</section>
					<section>
						<h2>Getters / Setters</h2>
						<p>Literal declaration for get / set descriptors:</p>
						<pre><code class="javascript hljs" data-trim data-line-numbers>
							const user = {
								name: "Smith",
								first: "John",

								get fullName(){
									return this.first + " " + this.name.toUpperCase()
								},

								set fullName(value){
									this.first = value.split(" ")[0];
									this.name = value.split(" ")[1];
								}
							}
						</code></pre>
					</section>
					<section>
						<h2>Own and delegated properties</h2>
						<p>
							The properties assigned to an object are called the <b>own properties</b> of the object. 
							But there are other types of properties, the <b>delegated properties</b>.
						</p>
						<img height="150" src="./assets/img/Image8.png">
						<p>These delegated properties are in fact the properties of the object's prototype (see Object Oriented section)</p>
						<pre><code class="javascript hljs" data-trim>
							obj.toString === Object.prototype.toString
							true
						</code></pre>
					</section>
					<section>
						<h2>Scopes</h2>
						<p><b>Scope</b> = perimeter within which variables can be accessed from a given location
							At the highest level, we are in the global scope, accessible everywhere.</p>
						<img height="300" src="./assets/img/Image9.png">
						<p>
							Accessible depuis le scope global <span class="green">(1)</span> : <span class="monospace">foo</span><br />
							Accessible depuis le scope de la fonction foo <span class="red">(2)</span> : <span class="monospace">foo, a, b, bar</span><br />
							Accessible depuis le scope de la fonction bar <span class="blue">(3)</span> : <span class="monospace">foo, a, b, bar, c</span><br />
						</p>
					</section>
					<section>
						<h2>Block scopes</h2>
						<p>In addition to function scopes, some instructions create so-called <b>block scopes</b></p>
						<p>These are known as <b>block instructions:</b></p>
						<div class="flex-center">
							<pre><code class="javascript hljs" data-trim>
								if(){ ... }
								for(){ ... }
								while(){ ... }
							</code></pre>
							<img height="150" src="./assets/img/Image10.png">
						</div>
						<p>
							A block scope can also be declared with <span class="monospace">{ ... }</span> <br />
							<em>(not to be confused with a literal object declaration)</em>
						</p>
					</section>
					<section>
						<h2>var, let or const?</h2>
						<ul>
							<li><b class="monospace">let</b> and <b class="monospace">const</b> appeared with ES2015</li>
							<li><b class="monospace">var</b> is no longer in use since</li>
						</ul>
						<div class="flex-slide">
							<img height="250" src="./assets/img/Image11.png">
							<table class="slide-array">
								<thead><tr><th></th><th>Scope</th><th>Re-assignable</th></tr></thead>
								<tbody>
									<tr><td class="monospace">var</td><td>function</td><td>yes</td></tr>
									<tr><td class="monospace">let</td><td>block</td><td>yes</td></tr>
									<tr><td class="monospace">const</td><td>block</td><td>no</td></tr>
								</tbody>
							</table>
						</div>
						<fieldset><u>Recommended:</u> Use <b class="monospace">const</b>, or <b class="monospace">let</b> if you need to reassign</fieldset>
					</section>
					<section>
						<h2>Closures</h2>
						<p>Scope of a function = local scope + parent scope = local variables + free variables</p>
						<p>
							A function using <b>free variables</b> (defined in a parent scope) creates what is called a <b>closure</b>. 
							A closure must remember its parent scope in order to execute correctly.
						</p>
						<div class="flex-center">
							<aside>
								<fieldset>
									<b class="monospace">add5</b> <em>retains its parent scope with x=5</em><br><br>
									<em>This link prevents the garbage collector from dereferencing the local variable x at the end of the add</em>
									<br><br>
									<b class="monospace">add5</b> <em>crée donc une closure</em>
								</fieldset>
								<fieldset>
									Unintentional closures are the most common source of <b>memory leaks</b> problems in web applications.
								</fieldset>
							</aside>
							<pre><code class="javascript hljs" data-trim>
								function add(x) {
									return function(y) {
										return x + y;
									}
								}

								var add5 = add(5);
								add5(8)
								▸ 13
							</code></pre>
						</div>
					</section>
					<section>
						<h2>Using closures</h2>
						<p>"Private" variables</p>
						<pre><code lass="javascript hljs" data-trim>
							function getCounter() {
								let value = 0;
								return {
									getValue(){ return value },
									increment() { value += 1}
								}
							}
						</code></pre>
						<p>Outside the scope of the <b class="monospace">getCounter</b> function, the value variable will never be accessible.</p>
						<p>Only the <b class="monospace">getValue</b> and <b class="monospace">increment</b> closures allow access</p>
					</section>
					<section>
						<h2 class="flex-center blue">
							Using closures
							<span class="title-exo">Exo 5</span>
						</h2>
						<pre><code class="javascript hljs" data-trim>
							for (var i = 1; i&lt;=3; i++) {
								setTimeOut( function timer(){
									console.log( i );
								}, i*1000 );
							}

							▸ 4
							▸ 4
							▸ 4
						</code></pre>
						<fieldset>
							Note that closures retain a reference to the parent scope,<br> 
							and therefore access free variables by <b>reference</b>, not by value. <br>
							<br>
							The value of the free variables can therefore vary with respect to the time of instantiation of the function.
						</fieldset>
					</section>
					<section>
						<h2>Functions and execution context</h2>
						<p>
							Functions have a "hidden argument" called <b>context</b> and assigned to the keyword <b class="monospace">this</b>. When the function 
							is called as a property (<b>method</b>) of an object, that object is assigned as context:
						</p>
						<pre><code class="javascript hljs" data-trim>
							const obj = {
								whoisthis(){ return this }
							}

							obj.whoisthis() === obj
						</code></pre>
						<p>
							In the global scope or when a function is called by direct reference,
							its context is the <b>global context</b> (<span class="monospace">Window</span> on browser)
						</p>
						<img height="80" src="./assets/img/Image12.png">
					</section>
					<section>
						<h2>Functions and execution context</h2>
						<p>
							The execution context can be overloaded with the methods 
							<span class="monospace">call</span>, 
							<span class="monospace">apply</span> and <span class="monospace">bind</span>
						</p>
						<pre><code class="javascript hljs" data-trim>
							function greet(a, b) {
								return `Hi I'm ${this.name} ! ${a} + ${b} equals ${a+b} !`
							}

							let alice = { name: "Alice" },
									bob = { name: "Bob" };

							greet.call(alice, 1, 2)
							▸ "Hi I'm Alice ! 1 + 2 equals 3 !"

							greet.call(bob, [2, 3])
							▸ "Hi I'm Bob ! 2 + 3 equals 5 !"

							let greetBob = greet.bind(bob, 1, 1)
							greetBob()
							▸ "Hi I'm Bob ! 1 + 1 equals 1 !"
						</code></pre>
					</section>
					<section>
						<h2>Primitives and object equivalents</h2>
						<p>
							<span class="monospace">String()</span>, <span class="monospace">Number()</span>, 
							<span class="monospace">Boolean()</span> are the object equivalent constructors of the corresponding 
							primitives, also called <b>primitive wrappers</b>
						</p>
						<p>The switch between object and primitive is automatic:</p>
						<div class="flex-center">
							<div style="flex-basis: 100%;">
								<center><p>Primitive -> Objet</p></center>
								<pre><code class="javascript hljs" data-trim>
									let str = "abc";

									str.length; // 3
									str.toUpperCase(); // "ABC"
								</code></pre>
							</div>
							<div style="flex-basis: 100%;">
								<center><p>Objet -> Primitive</p></center>
								<pre style="font-size: 1rem;"><code class="javascript hljs" data-trim>
									let Str = new String( "abc" ),
											str = Str.valueOf() // ou "" + Str
									let N = new Number( 42 ),
											n = N.valueOf() // +N

									console.log(Str, typeof Str) // "abc", "object"
									console.log(str, typeof str) // "abc", "string"
									console.log(N, typeof N) // 42, "object"
									console.log(n, typeof n) // 42, "number"
								</code></pre>
							</div>
						</div>
						<fieldset>Generally, primitive wrappers are not used explicitly</fieldset>
					</section>
					<section>
						<h2>Type conversions (cast)</h2>
						<p>There are 3 types of implicit conversions in JS:</p>
						<table class="slide-array" style="width: 80%">
							<thead><tr><th></th><th>Explicit cast</th><th>Implicit cast</th><th>Cast operators</th></tr></thead>
							<tbody>
								<tr>
									<td>ToString</td>
									<td><pre><code class="javascript hljs" data-trim>
										String(42)
										▸ "42"
									</code></pre></td>
									<td><pre><code class="javascript hljs" data-trim>
										12 + "34"
										▸ "1234"
									</code></pre></td>
									<td><pre><code data-trim>'' +</code></pre></td>
								</tr>
								<tr>
									<td>ToNumber</td>
									<td><pre><code class="javascript hljs" data-trim>
										Number("42")
										▸ 42
									</code></pre></td>
									<td><pre><code class="javascript hljs" data-trim>
										+"42"
										▸ 42
									</code></pre></td>
									<td>
										<pre><code class="javascript hljs" data-trim>- + * / %</code></pre>
										<pre><code class="javascript hljs" data-trim>> &lt; &lt;= >=</code></pre>
										<pre><code class="javascript hljs" data-trim>| & ^ ~</code></pre>
									</td>
								</tr>
								<tr>
									<td>ToBoolean</td>
									<td><pre><code class="javascript hljs" data-trim>
										Boolean(1)
										▸ true
									</code></pre></td>
									<td><pre><code class="javascript hljs" data-trim>
										!!1
										▸ true
									</code></pre></td>
									<td>
										<pre><code class="javascript hljs" data-trim>|| && !</code></pre>
									</td>
								</tr>
							</tbody>
						</table>
						<fieldset>Recommended: case explicitly and as soon as possible</fieldset>
					</section>
					<section>
						<h2>== or === ?</h2>
						<p>
							== weak equality (with conversion) <br />
							=== strict equality (without conversion)
						</p>
						<img height="250" src="./assets/img/Image13.png">
						<fieldset>
							The rules for conversion with weak equality are complex. <br /> 
							It's recommended to use strict equality, which is more predictable.
						</fieldset>
					</section>
					<section class="quizz">
						<h2 class="flex-center blue">
							Implicit casts
							<span class="title-exo">Quizz</span>
						</h2>
						<div class="flex-slide">
							<div style="flex-basis: 100%;">
								<p><pre class="fragment fade"><code>"0"-0</code></pre><pre class="fragment fade"><code>▸ 0</code></pre></p>
								<p><pre class="fragment fade"><code>"0"+0</code></pre><pre class="fragment fade"><code>▸ "00"</code></pre></p>
								<p><pre class="fragment fade"><code>+"1"+2</code></pre><pre class="fragment fade"><code>▸ 3</code></pre></p>
								<p><pre class="fragment fade"><code>+1+"2"</code></pre><pre class="fragment fade"><code>▸ "12"</code></pre></p>
							</div>

							<div style="flex-basis: 100%;">
								<p><pre class="fragment fade"><code>!"0"</code></pre><pre class="fragment fade"><code>▸ false</code></pre></p>
								<p><pre class="fragment fade"><code>!+"0"</code></pre><pre class="fragment fade"><code>▸ true</code></pre></p>
								<p><pre class="fragment fade"><code>+!"0"</code></pre><pre class="fragment fade"><code>▸ 0</code></pre></p>
								<p><pre class="fragment fade"><code>+"test"</code></pre><pre class="fragment fade"><code>▸ NaN</code></pre></p>
							</div>

							<div style="flex-basis: 100%;">
								<p><pre class="fragment fade"><code>+[1]</code></pre><pre class="fragment fade"><code>▸ 1</code></pre></p>
								<p><pre class="fragment fade"><code>+[1,2]</code></pre><pre class="fragment fade"><code>▸ NaN</code></pre></p>
								<p><pre class="fragment fade"><code>![]</code></pre><pre class="fragment fade"><code>▸ false</code></pre></p>
								<p><pre class="fragment fade"><code>!+[]"</code></pre><pre class="fragment fade"><code>▸ true</code></pre></p>
							</div>
						</div>
					</section>
					<section>
						<h2>Logical operators</h2>
						<p>Operands are converted to Booleans to evaluate the operator, but the original values are returned</p>
						<pre><code class="javascript hljs" data-trim>
							let a = 42,
							b = "abc",
							c = null;
							
							a || b; 	// 42
							a && b;		// "abc"
							
							c || b;		// "abc"
							c && b;		// null
						</code></pre>
						<fieldset class="monospace">
							a || b ⇔ a ? a : b <br>
							a && b ⇔ a ? b : a
						</fieldset>
						<p>
							If the implicit Boolean cast of a value is <span class="monospace">true</span>, 
							the value is said to be <em>truthy</em>, otherwise <em>falsey</em>
						</p>
					</section>
					<section>
						<h2>Logical operators</h2>
						<p>
							The operators <span class="monospace">||</span> and <span class="monospace">&&</span>, 
							the ternary conditions <span class="monospace">?:</span> and <br>
							<span class="monospace">if else</span> statements execute only one operand here:
						</p>
						<div class="flex-center">
							<pre><code class="javascript hljs" data-trim>if(0) log('A'); else log('B');</code></pre>
							<p class="fragment fade blue">B</p>
						</div>
						<div class="flex-center">
							<pre><code class="javascript hljs" data-trim>undefined ? log('C') : log('D');</code></pre>
							<p class="fragment fade blue">D</p>
						</div>
						<div class="flex-center">
							<pre><code class="javascript hljs" data-trim>true && log('E'); false && log('F');</code></pre>
							<p class="fragment fade blue">E</p>
						</div>
						<div class="flex-center">
							<pre><code class="javascript hljs" data-trim>true log('G'); false || log('H');</code></pre>
							<p class="fragment fade blue">H</p>
						</div>
						<p>
							The <span class="monospace">&&</span> operator has priority over <span class="monospace">||</span> 
							which has priority over <span class="monospace">?:</span>
						</p>
					</section>
				</section>
				<section>
					<section>
						<h2>ES2015 Upgrade</h2>
						<p>Exercices 7 to 11</p>
					</section>
					<section>
						<h2>Syntactic sugar: key and value</h2>
						<pre><code class="javascript hljs" data-trim>
							let foo = "foo", bar = "bar"

							const obj = { foo, bar } // equivalent to { foo: foo, bar: bar }

							obj
							▸ {foo: "foo", bar: "bar"}
						</code></pre>
					</section>
					<section>
						<h2>Syntactic sugar: calculated keys</h2>
						<pre><code class="javascript hljs" data-trim>
							let foo = "foo", bar = "bar"

							const obj = {
								[foo]: [bar],
								[foo+bar]: foo+bar
							} 
							
							/* equivalent to
							obj[foo] = [bar]
							obj[foo+bar] = foo + bar
							*/
						</code></pre>
						<pre><code class="javascript hljs" data-trim>
							obj
							▾ {foo: Array(1), foobar: "foobar"}
								▸ foo: ["bar"]
									foobar: "foobar"
						</code></pre>
					</section>
					<section class="slide-left">
						<h2 class="flex-center blue">
							Arrow functions
							<span class="title-exo">Exo 7</span>
						</h2>
						<pre><code class="javascript hljs" data-trim>
							const f1 = () => {},
										f2 = x => x*2,
										f3 = (a,b,c) => { return a+b+c }
						</code></pre>
						<p>Functions declared with this shortened syntax have specific features:</p>
						<ul>
							<li>No execution context <br>
							<span class="grey">(the value of <span class="monospace">this</span> is looked up in the parent scope)</span></li>
							<li>Cannot be invoked as builders</li>
						</ul>
						<p>Short and effective, they encourage a functional, no-frills style <em>(no closure)</em>.</p>
						<center><fieldset>Recommended for all non-method functions</fieldset></center>
					</section>
					<section>
						<h2>Default parameters</h2>
						<p>
							Assigns a default value if argument === <span class="monospace blue">undefined</span>
						</p>
						<pre><code class="javascript hljs" data-trim>
							function f(a, b=1, c=2) { return a + b + c }

							f(1, 2, 3)
							▸ 6
							f(1, null, null)
							▸ 1
							f(1, undefined, undefined)
							▸ 4
							f(1)
							▸ 4
						</code></pre>
						<p>Also works with the arrow functions:</p>
						<pre><code class="javascript hljs" data-trim>const doSomething = (params = {}) => {}</code></pre>
					</section>
					<section>
						<h2>Operators Spread / Rest</h2>
						<p>Spread: converts an iterable object into an argument list</p>
						<pre><code class="javascript hljs" data-trim>
							const sum = (a,b,c) => a+b+c;

							sum(...[1,2,3])
							▸ 6

							sum(1, ...[2,3])
							▸ 6

							[1, ...[2,3], 4]
							▸ (4) [1,2,3,4]
						</code></pre>

						<pre><code class="javascript hljs" data-trim>const cloneArray = arr => [...arr]</code></pre>
					</section>
					<section>
						<h2>Operators Spread / Rest</h2>
						<p>Rest : converts a list of arguments into an Array</p>
						<pre><code class="javascript hljs" data-trim>
							const sum = (...args) => args.reduce((a,b) => a+b, 0);

							sum(1,2,3,4)
							▸ 10

							function addToList(list, ...args) { // rest
								list.push(...args) // spread
							}
						</code></pre>
					</section>
					<section class="slide-left">
						<h2 class="flex-center blue">
							Operators Spread / Rest
							<span class="title-exo">Exo 8</span>
						</h2>
						<p class="blue">Object properties (ES2018)</p>
						<p>Only works with enumerable properties</p>
						<ul>
							<li>Rest properties:</li>
						</ul>
						<pre><code class="javascript hljs" data-trim>
							let { x, y, ...z } = { x: 1, y: 2, a: 3, b: 4 };
							x; // 1
							y; // 2
							z; // { a: 3, b: 4 }
						</code></pre>
						<ul>
							<li>Spread properties:</li>
						</ul>
						<pre><code class="javascript hljs" data-trim>
							let n = { x, y, ...z };
							n; // { x: 1, y: 2, a: 3, b: 4} 
						</code></pre>
					</section>
					<section>
						<h2>Destructuring</h2>
						<p>Assigns variables according to an object / Array structure</p>
						<pre><code class="javascript hljs" data-trim>
							const userData = { first: "Joe", name: "Dalton", age: 27 };
							
							const { first, age, name: userName } = userData;
							// first = "Joe", age = 27, userName = "Dalton"

							const myObject = {
								foo: {
									bar: 42
								}
							}
							const { foo: { bar: magicNumber } } == myObject
							// magicNumber = 42

							const [first, second, fourth] = [1,2,3,4];
							// first = 1, second = 2, fourth = 4
						</code></pre>
					</section>
					<section class="slide-left">
						<h2 class="flex-center blue">
							Destructuring
							<span class="title-exo">Exo 9</span>
						</h2>
						<p>Also works with function parameters:</p>
						<pre><code class="javascript hljs" data-trim>
							function doSomething({ config, options: { verbose } }){
								if(verbose) console.log("blabla");
								doSomethingElse(config);
							}

							doSomething({
								config: { ... },
								options: { verbose: true }
							})
						</code></pre>
					</section>
					<section>
						<h2>Default parameters</h2>
						<ul>
							<li>Can be expressions using other arguments or variables in the scope.</li>
							<li>If the default value is an expression, it will only be executed if necessary</li>
						</ul>
						<pre><code class="javascript hljs" data-trim>
							function doSomething(data, config = retrieveDefaultConfig(data)) {
								
							}

							const required = name => throw new Error(`Missing required paramter ${name}`)

							const findUsersByRole = ({
								role = required('role'),
								maxResults = 100
							}) => { }
						</code></pre>
					</section>
					<section class="slide-left">
						<h2>Object set in argument pattern</h2>
						<ul>
							<li>Object set with destructuring and default values:</li>
						</ul>
						<pre><code class="javascript hljs" data-trim>
							const searchProducts = ({
								minPrice = 0,
								maxPrice = 1000,
								inStock = true
							}) => {
								(...)
								return { results, size, lowestPrice }
							}

							const { results, size } = searchProducts({ maxPrice: 500 });
						</code></pre>

						<p>Receiving and returning a single object is very useful:</p>
						<ul>
							<li>no need to remember the order of the arguments</li>
							<li>each parameter can be optional</li>
							<li>we limit the quantity of variables to be passed from one point to another</li>
							<li>allows you to return several variables</li>
						</ul>
					</section>
					<section class="slide-left">
						<h2>Template strings</h2>
						<p>New form of String literal declaration in ES6, using the backtick ` ` character (AltGr+7)</p>
						<p>Allows:</p>
						<div class="flex-center">
							<ul>
								<li>interpolation of variables and expressions</li>
								<li>line breaks</li>
							</ul>
							<img height="100" src="./assets/img/Image15.png">
						</div>
						<center><fieldset>Recommended: use template strings for all non-trivial strings</fieldset></center>
					</section>
					<section>
						<h2 class="flex-center">
							Tagged Template strings
							<span class="title-exo">Exo 10</span>
						</h2>
						<p>If a function reference precedes a template string, that function is invoked with the static and dynamic parts of the string:</p>
						<pre><code class="javascript hljs" data-trim>
							function insertInUpperCase(string, ...vars) {
								console.log({ strings, vars });

								return strings.reduce(
									(out, str, i) => `${out}${str}={vars[i] || "").toUpperCase()}`
								)
							}
						</code></pre>
						<img height="150" src="./assets/img/Image16.png">
						<img height="150" src="./assets/img/Image17.png">
					</section>
					<section class="slide-left">
						<h2 class="flex-center">
							Map & Set
							<span class="title-exo">Exo 11</span>
						</h2>
						<ul>
							<li>Map: collection of keys/values like objects, but the keys can be of any type</li>
							<li>Set: collection of values without keys, guarantee of uniqueness</li>
						</ul>
						<div class="flex-center">
							<pre><code class="javascript hljs" data-trim>
								s = new Set([1,2,3,2,4])
								▸ Set(4) {1,2,3,4}

								s.add(5);
								s.delete(3);
								▸ Set(4) {1,2,4,5}

								s.has(4)
								▸ true
							</code></pre>
							<pre><code class="javascript hljs" data-trim>
								m = new Map([
									["key", "value"], [ s, s.size ]
								])
								▸ Map(2) { "key" => "value", Set(4) => 4}
								
								m.get(s)
								▸ 4
								
								m.set([1,2,3], [4,5,6])
								m.delete("key")
								
								▸ Map(2) {Set(4) => 4, Array(3) => Array(3)}
							</code></pre>
						</div>
					</section>
					<section class="slide-left">
						<h2>Modules (or ESM to disambiguate)</h2>
						<p>The long awaited standard solution for managing modular code (divided into several separate files)</p>
						<p><b><u>Replaces and supersedes:</u></b></p>
						<ul>
							<li>
								CommonJS (used in particular by Node)
								<pre><code class="javascript hljs" data-trim>const $ = require('jquery')</code></pre>
							</li>
							<li>
								Asynchronous Module Definition (AMD)
								<pre><code class="javascript hljs" data-trim>const $ = require('jquery')</code></pre>
							</li>
						
							<li>
								Universal Module Definition (UMD)<br>
								<em>Pattern combining CommonJS, AMD and using global variables to be sure to be understood by all module systems</em>
							</li>
							<li>the use of global variables and the <span class="monospace">&lt;script></span> to be ordered</li>
						</ul>
					</section>
					<section>
						<h2>Modules</h2>
						<div class="flex-center">
							<div>
								<p>Two keywords: <span class="monospace">import</span> and <span class="monospace">export</span></p>
								<p>A distinction is made between named imports and default imports</p>
								<pre><code class="javascript hljs" data-trim>
									import MonModule from './mon-module.js'
									import { a, b as two } from 'module'
									import React, { Component } from 'react'

									export const a = 42
									export function b(){ ... }
									export default { Component, View }
								</code></pre>
							</div>
							<img height="350" src="./assets/img/Image14.png">
						</div>
					</section>
					<section class="slide-left">
						<h2>Modules</h2>
						<p>Modules have a different execution context to traditional scripts:</p>
						<ul>
							<li>
								strict mode used by default <span class="monospace">("use strict";)</span>
								<ul>
									<li>explicit exceptions on certain silent errors</li>
									<li>new keywords are reserved as variable names</li>
									<li>forbids variables not explicitly declared</li>
								</ul>
							</li>
							<li>no global context (<span class="monospace">this === undefined</span> in the global scope)</li>
						</ul>
						<p>The code must therefore be parsed differently if it is a module:</p>
						<ul>
							<li>On browser: <pre><code><script type="module" src="index.js"></script></code></pre></li>
							<li>
								On Node.js: use <span class="monospace">.mjs</span> extension instead of <span class="monospace">.js</span>, 
								or have <span class="monospace">{ type: "module" }</span> in package.json
							</li>
						</ul>
					</section>
					<section>
						<h2>Modules</h2>
						<img height="350" src="./assets/img/Image21.png" alt="">
						<p>
							<a href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/">
								https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/
							</a>
						</p>
					</section>
					<section>
						<h2>Modules: dynamic import </h2>
						<p>
							When <span class="monospace">import</span> is called as a function, the module is imported asynchronously. <br>
							This is very useful for downloading code on demand and optimising the loading time of your applications.
						</p>
						<img height="250" src="./assets/img/Image18.png">
					</section>
					<section>
						<h2>Modules: what about support?</h2>
						<p>
							Average support (~93%) in 2021: Chrome 61, Edge 16, Firefox 60
							But developers use them widely in their codebases with bundlers like Webpack, Parcel, Rollup, esbuild...
						</p>
						<img height="200" src="./assets/img/Image19.png">
						<p>Bundlers preempt the browser's work by producing optimised JS bundles from a set of modules.</p>
					</section>
					<section>
						<h2>Modules: script nomodule</h2>
						<p>
							Browsers that do not support modules can load an alternative script 
							with the attribute <span class="monospace">nomodule</span>
						</p>
						<img height="125" src="./assets/img/Image20.png">
						<p>
							Bundlers can take advantage of this attribute to produce two bundles, a "modern" and a "legacy" 
							bundle with more transpiled code. <br>
							The "modern" bundle will be lighter and more efficient.
						</p>
					</section>
					<section class="slide-left">
						<h2>Modules : recommandations</h2>
						<p>Always use ESM modules and avoid other existing module systems</p>
						<p>Using a bundler with the "Modern build" option</p>
						<div class="flex-center">
							<ul>
								<li>Parcel: for simplicity and speed of implementation</li>
								<li>Webpack: for complex web applications</li>
								<li>Rollup: for JS libraries</li>
							</ul>
							<img height="100" src="./assets/img/Image22.png" alt="">
						</div>
					</section>
				</section>
				<section>
					<h2>Managing asynchrony</h2>
					<p>Exercices 12 to 14</p>
				</section>
			</div>
		</div>
	</body>

	<script src="./assets/plugin/notes/notes.js"></script>
	<script src="./assets/plugin/markdown/markdown.js"></script>
	<script src="./assets/plugin/highlight/highlight.js"></script>
	<script src="./assets/plugin/internation/internation.js"></script>
	<script type="module" src="./main.js"></script>
</html>